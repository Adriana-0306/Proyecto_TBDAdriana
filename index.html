<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión Equipo médico</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Estilos específicos para esta página */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f9fc;
      margin: 0;
      padding: 0;
    }
    
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }
    
    .welcome-section {
      margin-bottom: 20px;
      padding: 20px;
    }
    
    h1 {
      font-size: 2.5rem;
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .system-description {
      color: #7f8c8d;
      font-size: 1.2rem;
      margin-bottom: 40px;
    }
    
    .icon-menu {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 40px;
      padding: 20px;
    }
    
    .menu-card {
      width: 160px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      text-decoration: none;
      color: inherit;
    }
    
    .menu-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    
    .menu-icon {
      font-size: 2rem;
      color: #2980b9;
      margin-bottom: 10px;
    }
    
    .menu-text {
      font-weight: 500;
      color: #2c3e50;
    }
    
    .logout-card {
      border-top: 2px solid #e74c3c;
    }
    
    .logout-icon {
      color: #e74c3c;
    }
    
    /* Estilos para la barra de navegación */
    .navbar {
      background-color: #2980b9;
      color: white;
      padding: 15px 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .navbar-brand {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .hospital-name {
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <!-- Barra superior solo con logo -->
  <nav class="navbar">
    <div class="navbar-brand">
      <span class="hospital-name">GEB</span>
    </div>
  </nav>

  <div class="main-content">
    <div class="welcome-section">
      <h1 id="welcome-title">Bienvenido a GEB</h1>
      <p class="system-description">Esta es una página para gestionar equipo biomédico.</p>
    </div>

    <!-- Menú con iconos -->
    <div class="icon-menu" id="menu">
      <!-- Los elementos se añadirán dinámicamente -->
    </div>
  </div>

<script>
// Solicitar el tipo de usuario y ajustar el menú en función de este
fetch('/tipo_usuario')
    .then(response => response.json())
    .then(data => {
        const menu = document.getElementById('menu');
        const tipoUsuario = data.tipo_usuario;
        const welcomeTitle = document.getElementById('welcome-title');
        
        // Mostrar el tipo de usuario en el título de bienvenida
        let userTypeText = '';
        switch(tipoUsuario) {
            case 'admin':
                userTypeText = 'Administrador';
                break;
            case 'medico':
                userTypeText = 'Médico';
                break;
            case 'ing':
                userTypeText = 'Ingeniero';
                break;
            default:
                userTypeText = 'Usuario';
        }
        welcomeTitle.textContent = `${userTypeText}, bienvenido a GEB `;
        
        // Limpiar menú primero
        menu.innerHTML = '';

        // Agregar opciones de menú según el tipo de usuario
        if (tipoUsuario === 'admin') {
            // Admin
            menu.innerHTML += `
                <a href="/ver-usuarios" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-users-cog"></i></div>
                    <div class="menu-text">Ver Usuarios</div>
                </a>
                <a href="/agregar-equipo" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-plus-circle"></i></div>
                    <div class="menu-text">Agregar equipo</div>
                </a>
                <a href="/lista-medicos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-user-md"></i></div>
                    <div class="menu-text">Gestionar Médicos</div>
                </a>
                <a href="/admin/equipos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-cogs"></i></div>
                    <div class="menu-text">Gestionar equipos</div>
                </a>
                <a href="/busquedae.html" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-search"></i></div>
                    <div class="menu-text">Buscar equipo</div>
                </a>
                <a href="/busquedam.html" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-user-nurse"></i></div>
                    <div class="menu-text">Buscar médicos</div>
                </a>
                <a href="/cmedicos.html" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-user-plus"></i></div>
                    <div class="menu-text">Cargar Médicos</div>
                </a>
                <a href="/equipos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-laptop-medical"></i></div>
                    <div class="menu-text">Ver equipos</div>
                </a>
                <a href="/estadisticas" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-chart-bar"></i></div>
                    <div class="menu-text">Estadísticas</div>
                </a>
                <a href="/equipos-observaciones-extensas" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-exclamation-triangle"></i></div>
                    <div class="menu-text">Equipos con observaciones</div>
                </a>
                <a href="/subir-archivo" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                    <div class="menu-text">Subir archivo</div>
                </a>
                <a href="/archivos-subidos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-folder-open"></i></div>
                    <div class="menu-text">Ver archivos</div>
                </a>`;
            
        } else if (tipoUsuario === 'medico') {
            // Médico
            menu.innerHTML += `
                <a href="/equiposm" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-laptop-medical"></i></div>
                    <div class="menu-text">Ver lista de equipos</div>
                </a>
                <a href="/ver-mis-datos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-user"></i></div>
                    <div class="menu-text">Mis Datos</div>
                </a>
                <a href="/busquedae.html" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-search"></i></div>
                    <div class="menu-text">Buscar equipo</div>
                </a>
                <a href="/subir-archivo" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                    <div class="menu-text">Subir archivo</div>
                </a>
                <a href="/archivos-subidos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-folder-open"></i></div>
                    <div class="menu-text">Ver archivos</div>
                </a>`;
            
        } else if (tipoUsuario === 'ing') {
            // Ingeniero
            menu.innerHTML += `
                <a href="/ver-mis-datosing" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-user-shield"></i></div>
                    <div class="menu-text">Mis Datos</div>
                </a>
                <a href="/equipos-en-mantenimiento" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-tools"></i></div>
                    <div class="menu-text">Equipos en mantenimiento</div>
                </a>
                <a href="/equipos" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-laptop-medical"></i></div>
                    <div class="menu-text">Ver equipos</div>
                </a>
                <a href="/busquedae.html" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-search"></i></div>
                    <div class="menu-text">Buscar equipo</div>
                </a>
                <a href="/reportar-equipo" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-exclamation-circle"></i></div>
                    <div class="menu-text">Reportar equipo</div>
                </a>
                <a href="/equipos-observaciones-extensas" class="menu-card">
                    <div class="menu-icon"><i class="fas fa-exclamation-triangle"></i></div>
                    <div class="menu-text">Equipos con observaciones</div>
                </a>`;
        }

        // Opción de cerrar sesión para todos los tipos de usuario
        menu.innerHTML += `
            <a href="/logout.html" class="menu-card logout-card">
                <div class="menu-icon logout-icon"><i class="fas fa-sign-out-alt"></i></div>
                <div class="menu-text">Cerrar Sesión</div>
            </a>`;
    })
    .catch(error => console.error('Error obteniendo el tipo de usuario:', error));
</script>
</body>
</html>
